---
layout: default
title: rSkybox
---
<script>
'use strict';

var RMODULE = (function (my) {

  var requestConfirmCode;

  requestConfirmCode = function () {
    var
      carrier,
      carrierSelected,
      email,
      phone,
      restUrl,
      validEmail,
      validPhone;

    email = $('#emailAddress').val();
    validEmail = my.validEmailAddress(email);
    phone = $('#phoneNumber').val();
    validPhone = my.validPhoneNumber(phone);
    carrier = $('#mobileCarrierId').val()
    carrierSelected = carrier && carrier !== my.getNoOptionSelected();
    restUrl = my.getRestPrefix() + '\/users';

    if (!validEmail && !validPhone) {
      alert('Please enter your email address or phone number.');
      return false;
    }

    if (validEmail) {

      console.log('valid email');
    } else if (validPhone) {
      if (!carrierSelected) {
        alert('Please select your mobile carrier.');
        return false;
      }
      console.log('valid phone number');
    }
    console.log('saving item');
    return false;
  }

  my.init = function () {
    // If there is a current user, redirect right away.
    $('#index').live('pagebeforecreate', function () {
      my.getCurrentUser(function () {
        if (location.hostname === "www.rskybox.com") {
          my.redirect('https://rskybox-stretchcom.appspot.com/html5');
        } else {
          my.redirect('/html5');
        }
      });
    });

    $('#index').live('pageshow', function () {
      <!--my.jsonPopulate(my.getMobileCarriersUrl(), $('#mobileCarrierId'), function (select, carriers) {-->
        <!--select.html(my.getOptionsForSelect(carriers.mobileCarriers, 'Mobile Carriers'));-->
      <!--});-->
    });

    $('#index').live('pagecreate', function () {
      $(this).find('form').submit(requestConfirmCode);
    });
  };

  return my;
}(RMODULE || {}));

RMODULE.init();
</script>

<div data-role="page" id="index" data-title="rSkybox">
  <div data-role="header">
    <h1>rSkybox</h1>
    <a href="#login" class="ui-btn-right">Log In</a>
  </div>
  <div data-role="content">
    <div style="text-align: center;">
      <strong>Watch your application from the best seat in the house.</strong>
    </div>
    <form>
      <h1>Sign Up Using</h1>
      <label for="emailAddress" class="ui-hidden-accessible">Email Address:</label>
      <input type="email" name="emailAddress" id="emailAddress" placeholder="Email Address">
      <strong>or</strong>
      <label for="phoneNumber" class="ui-hidden-accessible">Phone Number:</label>
      <input type="tel" name="phoneNumber" id="phoneNumber" placeholder="Phone Number">
      <label for="mobileCarrierId" class="ui-hidden-accessible">Mobile Carrier:</label>
      <select name="mobileCarrierId" id="mobileCarrierId"></select>

      <input type="submit" value="Request Confirmation Code">
    </form>
  </div>
</div>
